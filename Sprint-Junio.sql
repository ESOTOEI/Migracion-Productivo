/* Historias de usuario - Modulo de comunicaciones - Acreditacion*/
  CREATE TABLE "ACREDITACION_COMUNICACIONES" 
   (	"NO_SOLICITUD" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"CLIENTE" NUMBER NOT NULL ENABLE, 
	"DETALLE" VARCHAR2(4000), 
	"ADJUNTO" BLOB, 
	"ADJUNTO_FILENAME" VARCHAR2(255), 
	"ADJUNTO_MIME_TYPE" VARCHAR2(255), 
	"CREATED" DATE, 
	"CREATED_BY" VARCHAR2(100), 
	"UPDATED" DATE, 
	"UPDATED_BY" VARCHAR2(100), 
	 PRIMARY KEY ("NO_SOLICITUD")
  USING INDEX  ENABLE
   ) ;

  ALTER TABLE "ACREDITACION_COMUNICACIONES" ADD CONSTRAINT "FK_ACRED_COM_CLIENTE" FOREIGN KEY ("CLIENTE")
	  REFERENCES "GES_CLIENTES" ("ID") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "ACC_LABO_TRV_BIU" 
    before insert or update  
    on ACREDITACION_COMUNICACIONES 
    for each row 
begin 
    if inserting then 
        :new.created := sysdate; 
        :new.created_by := nvl(sys_context('APEX$SESSION','APP_USER'),user); 
    end if; 
    :new.updated := sysdate; 
    :new.updated_by := nvl(sys_context('APEX$SESSION','APP_USER'),user); 
end ACC_LABO_TRV_BIU;
/
ALTER TRIGGER "ACC_LABO_TRV_BIU" ENABLE;
